<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  {% load static %}
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile | Mentor Mentee</title>

  <!-- STYLES -->
  <link rel="stylesheet" href="{% static '../static/styles/admin.css' %}" />
  <link rel="stylesheet" href="{% static '../static/styles/admin_profile.css' %}" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
</head>

<body>

<!-- ✅ HEADER -->
<header class="header">
  <div class="header-left">
    <img src="{% static '../static/Assets/logo.png' %}" alt="RCSS Logo" class="header-logo" />
    <div class="header-title">
      <h2 class="rcss-title">RCSS</h2>
      <p class="rcss-subtitle">RAJAGIRI COLLEGE OF SOCIAL SCIENCES (AUTONOMOUS)</p>
    </div>
  </div>

  <h1 class="main-title">MENTOR MENTEE</h1>

  <div class="header-right">
    <h3>{{ admin.name }}</h3>
    <div class="user-profile-icon">
      <img src="{% static '../static/admin_images/{{ admin.admin_image }}' %}" alt="Profile" />
    </div>
    <button onclick="window.location.href='{% url 'logout' %}'" class="logout-btn">Log out</button>
  </div>
</header>

<!-- ✅ PAGE BODY -->
<div class="container">

  <!-- ✅ SIDEBAR -->
  <aside class="sidebar">
      <nav class="menu">

        <a href="/admin_dashboard" class="menu-item">
          <i class="fas fa-th-large"></i> <span>Dashboard</span>
        </a>

        <hr class="menu-divider" />

        <!-- Students Dropdown -->
        <div class="dropdown">
          <a href="javascript:void(0)" class="menu-item dropdown-toggle">
            <i class="fas fa-graduation-cap"></i> <span>Students</span>
            <i class="fas fa-chevron-down dropdown-icon"></i>
          </a>

          <div class="dropdown-menu">
            <a href="/admin_addStudent" class="dropdown-item">
              <i class="fas fa-user-plus"></i> <span>Add Student</span>
            </a>

            <a href="/admin_ViewStudents" class="dropdown-item">
              <i class="fas fa-users"></i> <span>View Students</span>
            </a>
          </div>
        </div>

        <hr class="menu-divider" />

        <!-- Faculties Dropdown -->
        <div class="dropdown">
          <a href="javascript:void(0)" class="menu-item dropdown-toggle active">
            <i class="fas fa-chalkboard-teacher"></i> <span>Faculties</span>
            <i class="fas fa-chevron-down dropdown-icon"></i>
          </a>

          <div class="dropdown-menu" style="display:flex;">
            <a href="/admin_addFaculty" class="dropdown-item">
              <i class="fas fa-user-plus"></i> <span>Add Faculty</span>
            </a>

            <a href="/admin_ViewFaculty" class="dropdown-item ">
              <i class="fas fa-users"></i> <span>View Faculty</span>
            </a>
          </div>
        </div>
         <hr class="menu-divider" />
        <div class="dropdown">
          <a href="javascript:void(0)" class="menu-item dropdown-toggle">
            <i class="fas fa-chalkboard-teacher"></i> <span>Assignments</span>
            <i class="fas fa-chevron-down dropdown-icon"></i>
          </a>

          <div class="dropdown-menu">
            <a href="/admin_AddAssignment" class="dropdown-item">
              <i class="fas fa-user-plus"></i> <span>Assign Student</span>
            </a>

            <a href="/admin_ViewAssignments" class="dropdown-item">
              <i class="fas fa-users"></i> <span>View Assignments</span>
            </a>
          </div>
        </div>

        <hr class="menu-divider" />

        <a href="#" class="menu-item">
          <i class="fas fa-file-alt"></i> <span>Session Notes</span>
        </a>

        <hr class="menu-divider" />

        <a href="/admin_profile" class="menu-item active">
          <i class="fas fa-user"></i> <span>Profile</span>
        </a>

      </nav>
    </aside>


  <!-- ✅ MAIN CONTENT -->
  <main class="main-content">

    <section class="profile-section">

      <div class="profile-card">

        <div class="profile-header">
          <div class="profile-photo">
            <img src="{% static '../static/admin_images/{{ admin.admin_image }}' %}" alt="Profile Photo">
          </div>

          <div class="profile-details">
            <h2 data-field="name">{{ admin.name }}</h2>
            <p class="profile-subtitle" data-field="designation">{{ admin.designation }}</p>
          </div>
        </div>

        <div class="profile-info-grid">
          <div>
            <span>Email</span>
            <p data-field="email">{{ admin.email }}</p>
          </div>

          <div>
            <span>Phone</span>
            <p data-field="phone">{{ admin.phone }}</p>
          </div>

          <div>
            <span>Department</span>
            <p data-field="department">{{ admin.department.name }}</p>
          </div>

          <div>
            <span>Total Mentors</span>
            <p>{{ total_mentors }}</p>
          </div>

          <div>
            <span>Total Students</span>
            <p>{{ total_students }}</p>
          </div>
        </div>

        <button class="edit-profile-btn" id="editProfileBtn">Edit Profile</button>

      </div>

      <!-- ✅ EDIT FORM -->
      <section class="profile-edit-section" id="profileEditSection" hidden>
        <h3>Edit Profile</h3>

        <form id="editProfileForm" method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="profile-form-grid">

            <div class="profile-form-group">
              <label>Name</label>
              <input type="text" name="name" value="{{ admin.name }}" required />
            </div>

            <div class="profile-form-group">
              <label>Email</label>
              <input type="email" name="email" value="{{ admin.email }}" required />
            </div>

            <div class="profile-form-group">
              <label>Phone</label>
              <input type="text" name="phone" value="{{ admin.phone }}" required />
            </div>

            <div class="profile-form-group">
              <label>Designation</label>
              <input type="text" name="designation" value="{{ admin.designation }}" required />
            </div>

            <div class="profile-form-group">
              <label>Profile Photo</label>
              <input type="file" name="admin_image" accept="image/*" />
            </div>

          </div>

          <div class="profile-form-actions">
            <button type="button" class="btn-secondary" id="cancelEditBtn">Cancel</button>
            <button type="submit" class="edit-profile-btn">Save Changes</button>
          </div>

        </form>
      </section>

    </section>

  </main>

</div>

<!-- <footer class="footer"></footer> -->

<!-- ✅ JS -->
<script src="{% static '../static/script/admin_profile.js' %}"></script>
 <script>
    document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
      toggle.addEventListener('click', function (e) {
        e.preventDefault();
        const dropdown = this.closest('.dropdown');
        dropdown.classList.toggle('open');
      });
    });
    </script>

</body>
</html>
